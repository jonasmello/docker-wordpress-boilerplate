FROM php:7.2-apache
# FROM php:5.6-apache

ADD . /app

# RUN apt-get update
# RUN apt-get install -y software-properties-common


RUN apt-get update && \
    apt-get install -y \
    git zip unzip \
    libfreetype6-dev \
    libwebp-dev \
    libjpeg62-turbo-dev \
    libpng-dev \
    nano \
    libgmp-dev \
    libldap2-dev \
    netcat


RUN docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-webp-dir=/usr/include/  --with-jpeg-dir=/usr/include/
RUN docker-php-ext-install gd
RUN docker-php-ext-install pdo pdo_mysql zip gmp bcmath pcntl ldap sysvmsg exif

RUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer

RUN a2enmod rewrite

RUN cp /app/.docker/apache2/sites-available/000-default.conf /etc/apache2/sites-available/

RUN service apache2 restart

WORKDIR /var/www/html

#  mysql -u php -h mysql -D camicado -p1234php